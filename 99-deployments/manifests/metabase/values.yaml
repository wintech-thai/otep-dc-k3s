domain: metabase.otep.triple-t.co

### Metabase ###
metabase-k8s:
  enabled: true
  nameOverride: metabase

  ingress:
    enabled: false

  istio:
    enabled: false

  persistence:
    storageClass: "local-path"
    size: 10Gi

  env:
    MB_DB_TYPE: postgres
    MB_DB_DBNAME: metabase
    MB_DB_PORT: "5432"
    MB_DB_HOST: postgresql
    MB_DB_USER: postgres
  envFrom:
    - secretRef:
        name: postgres-secret

### pgSQL ###
postgresql:
  enabled: true
  fullnameOverride: postgresql
  auth:
    database: metabase
    existingSecret: postgres-secret
    secretKeys:
      adminPasswordKey: adminPasswordKey
  primary:
    persistence:
      size: 15Gi
    resources:
      requests:
        memory: "1Gi"
        cpu: "300m"
      limits:
        memory: "2Gi"
        cpu: "1"

  image:
    registry: asia-southeast1-docker.pkg.dev
    repository: its-artifact-commons/utils/postgresql
    tag: "v16.2.0-2"
